package addons

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

const txnIdForClaim = "8KusBegNmSG2bitSnf14tE:3:CL:57860:stage"
const claimDataToWrite = `
	{
	"auditPath": [
		"DWuZ1rnVYPCGfCAHBEZwbviMWwkvEuyahwwAP8wQMP5C",
		"GH5P3Z2kYd4ouFEz3Zgwumnq5gxNdXrWSvmb9WHwFsnh",
		"2XM5PqLDTt178WV33UgxY1aCv4Dnw4EUTDHcWsiv51zR",
		"2rmB1WLAWZ71k2QvkJ4YR9LsxMnRz1HjJ5dZdhmBdYzj",
		"CQNgFgHTifsvFFFdBmhy4ummAome2TvYxh6QUBcpRaoX",
		"By2NicpNAr7ffhoSzeZufDx8iN4sTcapg9DfgFn1aovM",
		"Hy47CsYo6nSqXDEsR33MHMnjnnNMMK3fmJ5ostkiwMcc",
		"9aTTScV8iJWvDgMSatTLF6GNqqA9cTvtfE7jCpbe3cdC",
		"JX9F2UMxKuYChDx3Nsth51ctBEA7hASeRwDD6GhcCNc",
		"E2krNag2StAzDEMK4aNUh9rvcR4WaviHo5QaRYaa2UyD"
	],
	"ledgerSize": 57980,
	"reqSignature": {
		"type": "ED25519",
		"values": [
		{
			"from": "Uvb86cUzmdgZ8AfbN176tc",
			"value": "sbC7p5kWtSxVkmf22fLZ1gV75PS2b1u4c1PM1AVpgEjpWFb9DujJVeEeZnEq2otEqFrksAcF9Ju6pAfLLVHkbts"
		},
		{
			"from": "VFUd8ynGaKB16okTwXmLMD",
			"value": "3tur21kbLi6UGaGy9skdETKAjrqTUr6uNVvJjuJXnf5DbVyJmx3HzTjbycG5Tr1TroW9RRZ7tfHVrEPPCQdF9Dip"
		}
		]
	},
	"rootHash": "FRVYWX6E8vdAyAEaXh7uaGScRQq29xd7bVduLVvSoBwA",
	"txn": {
		"data": {
		"data": {
			"primary": {
			"n": "89535902981151347829454479015945355083652336890307145368260714908061947375786450326438996243858597107579269067128636776793548977564242176184278958074815628497322094988014962327216700057876685546719886008645274198019983317494560697417336479776975202170925261572069788793817765544234798927589182347765544176548235239149569272387320650789638371654705899137579659783743011082460829320003502321062322817303594173648862013090481091066352620270152142646467584925115046659662025843402790310946090767966910557135186250872108094189700835272483391531016571398371812014267254486187024995037617498082237292666628113521588490750593",
			"r": {
				"assertion.badge.criteria.id": "87924746478891470920307747064516406371946264261931544198799325686274294470780762898327336356972356901691208787810787344780535027212153821077314432211613205727187248372617037222042455041420390094607338904642499482852834935514543136115361959471969029804005558302039556136450640211351042610394551881328042859428588660728552082704906032882814504634008063663409712482387768095321055980534714269436391091067057229135830121787416908111539797719720940318589817930172104081858511084688641138984363444727297267548260160661728133781418994077882146113426696124100481589952248865648585979353734782888923425989394078441181715323302",
				"assertion.badge.criteria.narrative": "71261020030658790464156386140422782295986185585547898435882945627042464967222835855422251347701695281463577280887609071817469586921312317428020606619003056411617275673440912746535105285202982415095294064511808396721575217261406732751177098929395809483494112658370585691865634770487238085945731040196475106137498296227366664913106594207820369301802628590338923781938791986296847907698551272380344026674151696056861149833496390393074732042610943993691550039686319348068203612701325372170016077925501302122148636151724780832894926200269483375688827949888619062562304718880103041160093830688966730730125258361840717562683",
				"assertion.badge.description": "34485347037656979881343327537502810235715777965618978298548848374237473359693688473587184335991824431785874200325555552736568336396988535566317953189956704891129726271888737046638805468038139545937738994787163848731600177975895219835527344642008644218442734619576220369044022180241101288248026276870813608383185132216163732103843912978543350971601368888937312073448605728969750070671437542335715221310555569900116586735050176494253828048494983962777607597544075100071490161311213932735125665757356767739944613923371494474855229991293993457692378357798170144250446468328739027766792248676849675537970661298008753347871",
				"assertion.badge.id": "32985584234704183225601823275794607352161122944069032912606900212975141344004620442843157914036424274614374494731442728500218591039522284070639376184649804074888907932943341247637356409417729005677875172926261797234443822182372269582914959793581392648628446404641552253356329774002535594715190975660836755114909559800492352186837397060075108671275667429725915961863100098822529880028173512661055739584921261501438346770667488200904306146739501112467041617617097688209152453120471466986568355818280710020582992031093671268903827245160984990591163593783328851483036740124554200623082231523783572839194048931254777255109",
				"assertion.badge.image.author": "42442980007427842681292303050603263015906139090032727113861626237508861431776119579987453650538559129522579836695054659061625866881664210327714726258682901539168465081035066897742191128377845485582055376067330025952609388876382951394267072381614535716595895683230170335636869258760334641639060930772542764719358289258837471138249943931363411963937757276532163884934310014989594105234821430852782405978262573663522035988634885208607568096174667087697896150676606828020761603983322220863369279427256667067978738707211178142915089317161473264034987283915229387535386404004087771701419926697779374328593574230961896655445",
				"assertion.badge.image.caption": "89011773301918276976293086839986035292123724969687126552846949881265214214323322049703875302097756407366347157472328617945489339046630611978033145572590662676724835824612024581833655739610771769246983851035887506011136460380443505966660714248800691733746040105115487959734356435169011640469435576611294087577166078252616920543888617871798391815987229129235530701098123908460610987410240125413310637947782971833500614241153017896485271908654589364613704653155785820437659501730935519496918992280114718485753315431132656479150316789649223630094581446361714239019702177098582872183540317759200420111855241393924825675516",
				"assertion.badge.image.id": "41810633235319600736508263660447310733842901225735649823033424530692140056187791839875127045410088738783584591813035656584565259994809692333915909411864390558349381340793303610255253758156281475044233487468890557601849691638939956671143856719420331688390880538393595119614332524287417186669378552705437482425668538207991396408953597066620784583204776654323135534382459331279943418955434043801934505563175603762207753572438032955524672996317736761377691601159221888523310551876848816548917627070603806309481381904272396978909679364782101112111301354273338921191542484600124656312812201857480553106376325944909729525637",
				"assertion.badge.issuer.email": "6770744597444989996165727003447091264971722329847376148084705772907465487985991806234367808795946800101508889063200425756999357455237583104277511214162858185446548629763010526118016920050677946954787918816070028501825263008977761962330701521828900929663824160466945902069928596034938732065168877805343063567159793913709169526660266674589359605898519400444503627128643129494645080545655518568168921382506781236805166227025459585662218129514851470613151240339827223021424453018449208327863304160331719509380349634315418318910365037622060572561280160827477435019825868760740135191972441147657288000665658923839997480612",
				"assertion.badge.issuer.id": "54379349811108176994136239923794037667922177396033376893583695781103480029676089725374084952224612055577695629484132408604102795079917258740398562700267045304202833296606719405771526917811398253567374217099803837296234862807506331312232210653689641197514741952622124174131759783876139012907252735699267802819719689150779505943256595390634880746068237780998818736191586680572141827706471176463693528930272233392583533081583875622167836011077540918587755068332038221389244544626868570539525823575560593568751432314871463289187612711866341909371121213946735212930744629552739543787621537545819016582655676118868407871554",
				"assertion.badge.issuer.image": "55428020995225010954517542310524291715254715230009024116748449069096711611433985888636673432780969601765699457086806763372701406528897625195226439980339248601030180148468048610085025819702467849575273414126853793620978592685135625431234762767003162605008098362489987399325825603431996287796716990259529600526958365217782715777044543366043915256422392004493693130671415632072224855552935651429080565131520450325492832846997466172686716311890109446613189550686151194474134106092306697681312980934880031778475988489667616389228307046330399107318633931112997273269525161120620695470875166278659286920416143094852340544274",
				"assertion.badge.issuer.name": "42422102623161296011964690656634879022238337404147663981442254388233123870896726126452012243307305770061130568862893928060492227870189798376040489746471322962361445577991160305127655688959723755215008087630450619962558479132128016389564922148550634022624141781534132783239573743040888859725210501257749509773306737077984733294338317044208498116884921708069751596212868032114908510916860119379945541589376613313039484882015995783042498791845233773227920791383765486408478271120201123571407529237216029387927190159840907114019814338895344511188701226849130445064443047763095377252092708705495185196182583703722105282676",
				"assertion.badge.issuer.publickey": "34236166336611899541010599690276312146402292872471771873307816628232814013572047078929529746709919315923536946804125901568752092563309251249676910801662805708701774084416478233179697450257960671457109252149110391058736842975739015067598877020038413964691541767977937579809846862956888534214391770242299211515255874858729888370248930447451602246734839656331431415625168245864156106319031820013607206389057492239536503043639884373919110304890271380605280289119784828095742896022953468467468390522444899629447085164653351990533707515451660172254639288920191960902890877227619340675628594140089190691278933280251622899693",
				"assertion.badge.issuer.type": "79185887156049153332954039192771087635042021459893241917132372526410272230675203849108506266310349365242538415549076962299822822462489976192266912904357139875049887474816367557509305411410786536869759276836976455707945382061143359366049613631722736373349547378538521959638437601589398791717233008402775868095726470899456506899609348878517705047424823903883753647025170966642503965221556298211785597999142403670997967760506444000326268354193216693386195645590152465299873349106283892791577943703475212115421209387240637834450588404676162601781327615430196448583261757632444396946858762588364344583021721416628054065697",
				"assertion.badge.issuer.url": "57374474793855029240864222984852012300926480454785672834462656185159510406316207783714994454596580654936977915315995937820819233102612719957459980598046537874334188527491824167141979123991435422518374802289318214090057090672941958373939369719254291525604729697906459100938574539315400047797963553727190367541371618810532600150263289419323774328556276523440186805110531922468937820333972476916264640184575699135457558262781262978400482201499186229366327120421328755883557789618778953686652661033644748421484751338186393433080626371084511366146522911626055792277912515119514479485851452958909108542564147708814282261636",
				"assertion.badge.name": "78108595143138952526292475684400248069738455844948903943418411453156342357529095734772939580371133471057067070093855316720026268776110072886973947066797833388711171774524299672728996369859362953959809542734595241705671528295622119791527721225501382522807042964397296334753720619936220605653029543615624130194806538810392031247388434493142211992058313070810974358304302767828615769394755149458613543183382710030664569884990635784498792071990105729170236411867831279900588280300341548224490048544894656098228289093803178958525615755072677408691461584284588527476668112190701572112862170787940448315999801631430527468564",
				"assertion.badge.related.id": "80965794285365086226435570788082841771037619032177882150761308079851785775737109824679473536227645108755378410575638901744390390744640611779668605625663016780558342253339814195109810987864746806381437904450285355031572837926938909488838631573911923955137674920492236868018483490489035925980813349215558802798363086150473807338316072476450417849582867469781248068992987318011653453965480825045593545646828808104461979143116186576626056270815947967534452541964504804504949570654237875958169949791534420218785867340571132196897970191915168146727169820995678104690111372096525706601848149961931570221643170606347759674583",
				"assertion.badge.related.version": "54122008018393159094639915837974377591474292303075830288609286443400366048425931412014397418999412309391721323793430802369289470722845998478385986214509024012339858353107749522391308405660124247344790361295512371512578225205414135046228458847422755848936203094182405945471598530851404444929917265719379274764877105067778433966434703282323929762096911810501389709437704860666128952797613051645859935789121205508881395941805276211282772360964170033284961322617483634078927725225597145222990943268940939382104374480718116977240684803724756492318264430222206742128967032218748485994143207208882507736673601408830811154409",
				"assertion.badge.type": "53128119955937846263180764718009855908157080803935723541615741476581777472573792746485961523828850517753617023814643588980458209058781915390301678859539530885739959335439854486284715928379577090682003726806448525621929568583062020810136274521863918250883433458931248776215647207387867775968958141225438814953632012608018259735921279555116382042732222602391032899276160259711148588984439377796693979055977920828275312185658303197722249780121229359724700404796291555235222864477632329688838959876843655296084996406424631157087948311115879693645942139170106734744398998916710196174776017100080301540022954749724090223986",
				"assertion.badge.version": "8755681926749772751202807451608330493183911565028891173071024209581768713226525874573779674974703411855101325737011114673942919298545162346207037973723769509343608439959659163931713527733260361378564605380538526712767159457422280645146408712303095100350565259422939641115070036800878864103405025645839656257485162413413088001983709557642639017119148526034711259763586622971451750138207353665410858243647551723850552902801422596419600642069518602875418380812303943486446299345863712263348954402770501224037711731308229272690048033396913274820966971088258696533392766336637882352409268855542545468935564766979581631849",
				"assertion.evidence.description": "2211588376339022198507000290793647946650504928825457277312700687335912902692184751241969311618688876030705204860141260119627935559864357108187932181173958496955957148252226450983448967947383441345238034043944156092702390928250332737397802563893039844555098859703562888565823769694218499099082493582949143549327023114456900530011876970924415762207218203687754894315884312893797669271677861465328564971761827427197589208326906964833960424436445488658384593018054424233719521479191134068952900906290696232329038284866827687435962898640598849346303301475110502303580174748594617992835211173834001628664172256138255479112",
				"assertion.evidence.genre": "79247471723983414766039032390779435299728092936294963888794744137766198261617011706549133431276689273241662786693521536989599284168859449074637810010525611374905740731619887451184596094593122432557100933198695967616042094959867110310396729901365828904831774527585643020854821314413553639401288413554862666915421665131606987261436364591416274330144697256009246074272891437337715690470316224230066996305253835479489030707349751026119796089808339467379413798049321675188565052626818908503975097837372983808629432518951691509818249291871597982286942305409835480449772591249301725668276448765556794256899211325898181118454",
				"assertion.evidence.id": "87639479903163794839976600428952481159859621140773023921368087195890232399524952373977111668629339480443377586599175668684284640063371250735609153279917870618146799344955617639448631647718856609003527241291580643338254786364638326732985668395676593225018832460987233943207442501062623238067010529444313989093177932076305776909241063515234409427176827177887957344816849501603019103972044111639047747710605260715616698466622746832628119818031955613224583221285230666415656135951031980098398184605907809531465701690877752566471170482616730995828782234698662654457777238103499064206596295634992990543469263077390925155018",
				"assertion.evidence.name": "32563323904833341060322483350922235397960467775153795994441106909491035081101119748433350080197975574375991974122415610278731472827548665329870553845369788383935714846733740040748005500629089636812815108589657267863699380513441237637747310782834387818659586236182771066584860641769510301673114954088938991423658057273644342310758598264897772433191875995355437068610337932401903218131669919951112995583416890096951102716410483748095167526573234520459144021856334984577701313970459101868705753653687183048355431979250804283481635228552312943308417831289960204105904831281068896458845698357726794571672484126110349871261",
				"assertion.evidence.narrative": "68271301427328258832439805774412622261248681024730553845419434076660433890337138408420888896042777533844078223126635653084531118746624141129228137508060386592235566967675932126113053519263339734612988594879342737724818121364768601389591992959709446039224698983215535546974667151785644178519395008926223607079448282614428683109531937182571739456104955168248912914349996578918369961076870276986147881601132222532500143712165398487174654726608804593564630435785812842623947895057807876446732084034702312900652630873213413324380865955851476174610669309521320583102410799166161618415501778087775403201780410343301611543802",
				"assertion.expirationdate": "74779021117780141099840290825027188087895403552357390191102842507488775347878571562080028766735448363129993885044737061427843936896759453943215734248399669535601188862797162135264113664522966973649336667939181400848888582694912886318902776475245634915422770695471421536190438712180061158674504886979744594508471911082220662405725201295781732391175011563244967922916274047488178043429749797443982065188698776093190147909524549889918761524509042946994707256161365829011537821017915764674565193276228745978419010630246979883394922176736135486233602831697128121671019983066883596629833495560833962329105957833921927240791",
				"assertion.id": "24482459943669229023671441858047914433534558880397060247391568872786142269808616723350068553124279184837931146853255132012313875092030320418496171349702016987087839537197477302065472226424783621957981025920256568444289244221789923809281984880007929461724178550035214922120581527983262562298840685031263931311280191741388602656426957050058649693570071681878428784461230499316013524768515738811575266966637577683322297841680497941180266640748704464095932629417610298051300576188295434913926838968930746365865731044042721378056590407404099571048544100965717770107906554437036578204419996539899771726170454630075498099389",
				"assertion.issuedon": "48886507983316293173974373045561120345997415229559729943731643492560112683235586813018798730435013835227613639783529982089340840833766373671373900182603591542581086442501565287066124268461099574847225381612040157504500217485755248072200048551471068446030678007618499990431399986018247212543659976943616514307623600522255840190877835020945019123556476724204586617311975472387510652615929745100739727039038091078158481837875639978040366185662185559985844429199592837350782410909642059754139314973517125189764126718282999170999864825803650451314745717818929038644081559244731700839175358963658777786090938674221911675942",
				"assertion.recipient.hashed": "45553513331028666802893058839537085077581391164097800717780609900356468167629701948274960932456263906707857800144832905085794980039261013594387307165017515923696150262274771148933698505203555295109432271066644228210174263531701086687137672588007994562240890353618614055772399293106164085595696329204891218666835282633670400713828242784145559770799954948926436240517059973067699063510219757707527309869160817861609447973655120258618239897820932500171785697491468989191705116173409275039248024225407636786416391469023664904138443160187566859349759602948519976909408569341643218704076533136285162243374619995581236293812",
				"assertion.recipient.identity": "49502449740150677734929270493243805892094073945104443703862347359937799977184004515278932556428488923802810989467950581206215933463926909829379943682717737660362012974368721985698867495243037580102280543715212585521539219521550787667866423669234957428078067204210057784222606090176341605044724203269430472942097840461547913399145171604967586284750405879355062024003017195299500478182789924879087728606726389636971895178708949878906202891310562583530989333819560583002528288202655491568353504148887767568568754357045049104205087082465213429653546160538748755897563142982535958702545407165446685499504195804278852906302",
				"assertion.recipient.type": "53792278797946150896511278376594827715071036120394035322084795636855977368970167676119130921954261841671351858438515542872005584081245914893457389856970085525738939216835855455159796201909095837940506676656736003649663051085797515503205978336090195011549599119927319895420027116002520881410267133042400671472103658792232434159699836591362141097087256714544540178229329112774186910499179587747476641013511520050916732117048179507605422091976112857385291076543794011922443519206243156464697070811659744085644691359954698620589663415835988159409001818117825185178150090500171071284832675666202155868798604309048174554682",
				"assertion.verification.creator": "4384244508652215612422952039787396868875524718975867918633915897204043686637528216463022749136858733832160019214302995691013356862281194836418690332722830364030766066389406049724345031556023281414318505473648193895990886404771988071869853906632985467821830430031808697291107088952597037931518773101527701651482909642724024669095798936010420451095728054566659405112424941093574949357896550438247856267214410928506837519680023247605037651121429326537820921702664842767003610115099984837695857448211759484334611678183879536743354181007566480526252030404419939023158354718994287858398886377067853820815072486691731464092",
				"assertion.verification.type": "38989640616624080792133471649818779204619315288787438496858396447138323843133747029885743265598440220727768713502641458778134441359483973526208633651656776393025534429493031498496738787178150696160476353458855443805312828965548466997446500480845765195377043137958614630544206053610659876244769094682948762640888546020990752735340091263183846388095423701231249140907498138282616953350827171604055349197747151578277800252331410896280490576616760979536044573832592464862349383863414383852014506223624047425876771260928447591671776940142634646790579127783730749817048280367853996863287996108859331907044083659596565252866",
				"master_secret": "63105329622223637709516086492068894389231591414222199071002983351864666324328956106579716795732376405968191005598195681807975209749829579322271974853017367281105874244892354687000910103525533576056432876725184750948213350636752867018451072476539123568525260188297503483354160187757720516945299837084852974362286373823622412951513190286446459808092600724895841824325873976456407046883258814117893053253777397219434145904710150180205494641338118904985165031790278140170596610375310756676473476771654803011658500732821717624386024855729213427977170210584462174095431264312851348523784772205822270846415068495637649724322"
			},
			"rctxt": "64037483539868823572605019504585728237339827486300541910665727889358624685992085497449372276287811911096884020572223558793644765190071144344943822112907456708156991572714529523858387094840033093174341465936529351638110094226230199940459786392456106933616239368846908715450437329407909777019742005192027956179460836628233841863780210481057931548852940610703484422037025725476466928904621911421731340874428080012326724146693567912473159938361615813105731565814475741233282565067860147247112055078342127990480125328043319593886073661449493789341542149752846053461520497853857542886819939338357463115824091331986777392523",
			"s": "74832911668707181279743031225782055936278463538133888456887019882103613400124602988506737627284883008493756008636424552280929460561029733441581518072541509096052613014586895881951966082003598117839781871794198306987341243353983558885408313375400727246260856165151129176066047630792045889015052942596683011582466790673628889251160322718158353707095527430084256085710479200199508291760822990430807086886388510283675342177737111292496305291498065473035681336767343841244860246140822420021601708728602377514194819890832498024729193517080084806484043232815654816275060671384584165198311737605088702012356821777401353382360",
			"z": "22186362309618595124350787294498824602824345908162095134950397298906242354871980753611878115346743661062239385749033651864637934192968459640482905418159356530380099524579781679439583721921820101956897588951301460964608271298488494836889011579476949516806763406717937011226396996050566189677653665333040070005350344503378564691958918773339355540690744279428412066146799426999179137318730817148930625476483404672155944902248295126063082116360271541974375661003249792612748025618528210255211313202651860162728569235228209329609061008884911902476148271997827439662938761742950014011171184019745433825314534400284191829335"
			}
		},
		"ref": 57753,
		"signature_type": "CL",
		"tag": "tag1"
		},
		"metadata": {
		"digest": "a9a2f62db83b2d5f64726937340e6df0122e49e106ddc209567fce6ce6f9b24d",
		"endorser": "Uvb86cUzmdgZ8AfbN176tc",
		"from": "VFUd8ynGaKB16okTwXmLMD",
		"payloadDigest": "f022ac96f754fc54adfa62be51d5f3f643950ee0753d5892bc608aa150d22089",
		"reqId": 1612181906183592400,
		"taaAcceptance": {
			"mechanism": "on_file",
			"taaDigest": "8cee5d7a573e4893b08ff53a0761a22a1607df3b3fcd7e75b98696c92879641f",
			"time": 1612137600
		}
		},
		"protocolVersion": 2,
		"type": "102"
	},
	"txnMetadata": {
		"seqNo": 57980,
		"txnId": "VFUd8ynGaKB16okTwXmLMD:3:CL:57753:tag1",
		"txnTime": 1612182064
	},
	"ver": "1"
	}`

const txnIdForSchema = "66iuaY3Xtet8zATFCjtVtt:2:Test:1.0"
const schemaDataToWrite = `
{
	"auditPath": [
	  "3tmbKyGsM5WgKxwE1UrZPu4HhGk7UmKKc9ocymQJmk5z",
	  "3hhZD5Y6DFWGXQYxcTtbkjeN3LXMhnfmZ6LmKynQNJRC",
	  "9XwjWt471A6BSKBV3QdwVjwSpiUYeMZQK7gAQpHwEFht",
	  "3RAQu11eYNrBSEHVaMXpxc7rSGqJLpoUnaJdZ2Pahst4",
	  "7S1RSVHDq9eygwVRw1eJ1MudowaRMqrV69GqA15R8iRD",
	  "HpwJQZ2wMNFS3NWy6g3gZTfyRu39RKkYJnxXED4BTx9c",
	  "9tSj5o8Jv6t9KjqmEFsykRFzbua7Yj4ntJ2WMKVjPt4G",
	  "E7c7gdFYtGcvPRQoGcqWbrARDRE9ZcYr396x8gUmUgyA",
	  "HP5YWVqUzAZkbBJun1gm27XeBtTQykPRBVyRRLaFp5SV",
	  "6hP3vormwsUbzCajzgqXrpuyXyAKQYfdxSWKod4zPV1G",
	  "JCEtsJy1msVUhUjPGwWzSi7vnhr2H1cyM1WZMTjYDejF",
	  "DXxNEopjX4M29CTVyKMWZ98FCdhXKEj2TFNLV3wZF4SE",
	  "FsnspiDdnv7qhTdbzu3d1jsbC8dyiKpL3QSQFn8f7wQw"
	],
	"ledgerSize": 185855,
	"reqSignature": {
	  "type": "ED25519",
	  "values": [
		{
		  "from": "66iuaY3Xtet8zATFCjtVtt",
		  "value": "3kzD5B16wJ3vdYVx6QgtUSXtL8G5kaivcUZVEym1ZrNU7cggWaTy1HXU2mVyVvikibiPwnx7VZAa9DSC94LVoU8J"
		}
	  ]
	},
	"rootHash": "5izSAV9Nayk6ibTTZ12kbp1C875jNRifzqVsfZZFSfPk",
	"txn": {
	  "data": {
		"data": {
		  "attr_names": [
			"test1",
			"test2"
		  ],
		  "name": "Test",
		  "version": "1.0"
		}
	  },
	  "metadata": {
		"digest": "d22c433d1e161fdb72e773b8af62f0a96f281f7131f2ec1747920985a3446cb5",
		"from": "66iuaY3Xtet8zATFCjtVtt",
		"payloadDigest": "cd107d4bfc5a4174b2b7fe24e274a373708c852c7334fa7698e4db379c699e88",
		"reqId": 1613387270357216300,
		"taaAcceptance": {
		  "mechanism": "wallet_agreement",
		  "taaDigest": "8cee5d7a573e4893b08ff53a0761a22a1607df3b3fcd7e75b98696c92879641f",
		  "time": 1613347200
		}
	  },
	  "protocolVersion": 2,
	  "type": "101"
	},
	"txnMetadata": {
	  "seqNo": 185855,
	  "txnId": "66iuaY3Xtet8zATFCjtVtt:2:Test:1.0",
	  "txnTime": 1613387270
	},
	"ver": "1"
  }`

const txnIdForNym = "dc89ff11a021eabed73eb9b77cff9da6890727e0c3c2d96beab675c439410f27"
const nymDataToWrite = `
{
	"auditPath": [
	  "Hy47CsYo6nSqXDEsR33MHMnjnnNMMK3fmJ5ostkiwMcc",
	  "9aTTScV8iJWvDgMSatTLF6GNqqA9cTvtfE7jCpbe3cdC",
	  "JX9F2UMxKuYChDx3Nsth51ctBEA7hASeRwDD6GhcCNc",
	  "E2krNag2StAzDEMK4aNUh9rvcR4WaviHo5QaRYaa2UyD"
	],
	"ledgerSize": 57857,
	"reqSignature": {
	  "type": "ED25519",
	  "values": [
		{
		  "from": "Uvb86cUzmdgZ8AfbN176tc",
		  "value": "23tSkVceUujuYVAiGzrRPWwuCfVqDsoFWuwKRPqe9xGzdt3vmQyszMe5mcgD7DftsAghzwodmHrot9htANJAug7T"
		}
	  ]
	},
	"rootHash": "46sVshGqkKsFczn2mFExowvd5MZse27qzfmRYnvUPGXV",
	"txn": {
	  "data": {
		"dest": "34qdX2WQxr8D6KFpT2n8TK",
		"verkey": "28KL74brNmRgtzoRXS3Yd5gDR3TGxiBtzY4Gg8qLgJ5R"
	  },
	  "metadata": {
		"digest": "9734ffe98d755e460ae6e2d9404c919a6c13a77f9fd3412570a8259b112e172c",
		"from": "Uvb86cUzmdgZ8AfbN176tc",
		"payloadDigest": "23fdf9b2c8dc60edac0ad6d6aecdbb45703f050c4bd249b51fef774a5bced737",
		"reqId": 1611221221957334300,
		"taaAcceptance": {
		  "mechanism": "on_file",
		  "taaDigest": "8cee5d7a573e4893b08ff53a0761a22a1607df3b3fcd7e75b98696c92879641f",
		  "time": 1611187200
		}
	  },
	  "protocolVersion": 2,
	  "type": "1"
	},
	"txnMetadata": {
	  "seqNo": 57857,
	  "txnId": "dc89ff11a021eabed73eb9b77cff9da6890727e0c3c2d96beab675c439410f27",
	  "txnTime": 1611221222
	},
	"ver": "1"
  }`

func TestApiLedger_Open(t *testing.T) {
	ok := apiLedger.Open("FINDY_API_LEDGER")
	assert.True(t, ok)
}

func TestApiLedger_Claim(t *testing.T) {
	ok := apiLedger.Open("FINDY_API_LEDGER")
	assert.True(t, ok)
	err := apiLedger.Write(txnIdForClaim, claimDataToWrite)
	assert.NoError(t, err)
	name, value, err := apiLedger.Read(txnIdForClaim)
	assert.NoError(t, err)
	assert.Equal(t, txnIdForClaim, name)
	assert.Equal(t, CleanString(claimDataToWrite), value)
}

func TestApiLedger_Schema(t *testing.T) {
	ok := apiLedger.Open("FINDY_API_LEDGER")
	assert.True(t, ok)
	err := apiLedger.Write(txnIdForSchema, schemaDataToWrite)
	assert.NoError(t, err)
	name, value, err := apiLedger.Read(txnIdForSchema)
	assert.NoError(t, err)
	assert.Equal(t, txnIdForSchema, name)
	assert.Equal(t, CleanString(schemaDataToWrite), value)
}

func TestApiLedger_Nym(t *testing.T) {
	ok := apiLedger.Open("FINDY_API_LEDGER")
	assert.True(t, ok)
	err := apiLedger.Write(txnIdForNym, nymDataToWrite)
	assert.NoError(t, err)
	name, value, err := apiLedger.Read(txnIdForNym)
	assert.NoError(t, err)
	assert.Equal(t, txnIdForNym, name)
	assert.Equal(t, CleanString(nymDataToWrite), value)
}

// func TestApiLedger_Read(t *testing.T) {
// 	ok := apiLedger.Open("FINDY_API_LEDGER")
// 	assert.True(t, ok)
// 	err := apiLedger.Write("testID:id:sfs:sf:dd", "testData")
// 	assert.NoError(t, err)

// 	for i := 0; i < 3; i++ {
// 		name, value, err := apiLedger.Read("testID:id:sfs:sf:dd")
// 		assert.NoError(t, err)
// 		assert.Equal(t, "testID:id:sfs:sf:dd", name)
// 		assert.Equal(t, "testData", value)
// 	}
// }
